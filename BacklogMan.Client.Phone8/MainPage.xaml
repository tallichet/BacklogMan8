<phone:PhoneApplicationPage
    x:Class="BacklogMan.Client.Phone8.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    DataContext="{Binding Path=Main, Source={StaticResource Locator}}"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait"  Orientation="Portrait"
    shell:SystemTray.IsVisible="True"
    shell:SystemTray.BackgroundColor="{StaticResource BacklogManMainColor}"
    shell:SystemTray.ForegroundColor="White"
    Loaded="PhoneApplicationPage_Loaded">

    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="Transparent">
        <Image x:Name="backgroundImage" Source="/Assets/FullScreen.png" Margin="0,0,0,0" Stretch="UniformToFill" />

        <!--Pivot Control-->
        <phone:Pivot x:Name="pivotMain" Title="BACKLOG MAN" SelectionChanged="Pivot_SelectionChanged">
            <phone:PivotItem Header="Main backlogs">
                <Grid>
                    <phone:LongListSelector ItemsSource="{Binding Path=MainBacklogs}" VerticalAlignment="Bottom">
                        <phone:LongListSelector.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Height="120" Margin="6" Tap="Backlog_Tapped" Tag="{Binding}">
                                    <TextBlock Text="{Binding Path=Name}" Style="{StaticResource PhoneTextTitle2Style}" />
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding Path=Statistics.StoriesTotal}" Style="{StaticResource PhoneTextItemStyle}" Margin="0,0,5,0" />
                                        <TextBlock Text="Stories" Style="{StaticResource PhoneTextItemStyle}" Margin="0,0,5,0" />
                                        <TextBlock Text="{Binding Path=Statistics.StoriesCompleted}" Style="{StaticResource PhoneTextItemStyle}" Margin="0,0,5,0" />
                                        <TextBlock Text="completed" Style="{StaticResource PhoneTextItemStyle}" />
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding Path=Statistics.PointsTotal}" Style="{StaticResource PhoneTextItemStyle}" Margin="0,0,5,0" />
                                        <TextBlock Text="Points" Style="{StaticResource PhoneTextItemStyle}" Margin="0,0,5,0" />
                                        <TextBlock Text="{Binding Path=Statistics.PointsCompleted}" Style="{StaticResource PhoneTextItemStyle}" Margin="0,0,5,0" />
                                        <TextBlock Text="completed" Style="{StaticResource PhoneTextItemStyle}" Margin="0,0,5,0" />
                                    </StackPanel>
                                </StackPanel>
                            </DataTemplate>
                        </phone:LongListSelector.ItemTemplate>
                    </phone:LongListSelector>
                </Grid>
            </phone:PivotItem>
            
            <!--Pivot item one-->
            <phone:PivotItem Header="Organizations">
                <Grid>
                    <phone:LongListSelector ItemsSource="{Binding Path=Organizations}">
                        <phone:LongListSelector.ItemTemplate>
                            <DataTemplate>
                                <Grid Height="120" Margin="6" Tap="Organization_Tapped" Tag="{Binding}">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>

                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="60" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                               
                                    <Image Width="60" Height="60" Source="{Binding Email, Converter={StaticResource EmailToGravatarUriConverter}}" 
                                           Grid.RowSpan="2"/>
                                    <TextBlock Text="{Binding Path=Name}" Style="{StaticResource PhoneTextTitle2Style}" 
                                               Grid.Column="1"/>
                                    <TextBlock Text="{Binding Path=Description}" Style="{StaticResource PhoneTextNormalStyle}" TextWrapping="Wrap" 
                                               Grid.Column="1" Grid.Row="1"/>
                                </Grid>
                            </DataTemplate>
                        </phone:LongListSelector.ItemTemplate>
                    </phone:LongListSelector>
                </Grid>
            </phone:PivotItem>

            <!--Pivot item two-->
            <phone:PivotItem Header="Projects">
                <Grid>
                    <phone:LongListSelector ItemsSource="{Binding Path=ProjectsStandalone}">
                        <phone:LongListSelector.ItemTemplate>
                            <DataTemplate>
                                <Grid Height="120" Margin="6" Tap="Project_Tapped" Tag="{Binding}">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>

                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="60" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>

                                    <Path Grid.Row="2" Fill="#006dcc" Stretch="Fill" UseLayoutRounding="False"
                                          Data="M19.8214,22.8567 C19.5119,22.8567 19.2083,22.9698 18.9107,23.196 C18.6131,23.4221 18.4167,23.69 18.3214,23.9995 L17.5714,26.2852 C17.4762,26.5948 17.5,26.8626 17.6429,27.0888 C17.7857,27.315 18.0238,27.4281 18.3571,27.4281 L40.0714,27.4281 C40.381,27.4281 40.6845,27.315 40.9821,27.0888 C41.2798,26.8626 41.4762,26.5948 41.5714,26.2852 L42.3214,23.9995 C42.4167,23.69 42.3929,23.4221 42.25,23.196 C42.1071,22.9698 41.869,22.8567 41.5357,22.8567 z M22.7857,13.7138 C22.4762,13.7138 22.1726,13.8269 21.875,14.0531 C21.5774,14.2793 21.381,14.5471 21.2857,14.8567 L20.5357,17.1424 C20.4405,17.4519 20.4643,17.7198 20.6071,17.9459 C20.75,18.1721 20.9881,18.2852 21.3214,18.2852 L43.0357,18.2852 C43.3452,18.2852 43.6488,18.1721 43.9464,17.9459 C44.244,17.7198 44.4405,17.4519 44.5357,17.1424 L45.2857,14.8567 C45.381,14.5471 45.3571,14.2793 45.2143,14.0531 C45.0714,13.8269 44.8333,13.7138 44.5,13.7138 z M21.6429,4.57095 L48.8214,4.57095 C50.5833,4.57095 51.9405,5.23762 52.8929,6.57095 C53.8452,7.90428 54.0595,9.4519 53.5357,11.2138 L43.75,43.571 C42.8929,46.4043 42.0417,48.2317 41.1964,49.0531 C40.3512,49.8745 38.8214,50.2852 36.6071,50.2852 L5.57143,50.2852 C4.92857,50.2852 4.47619,50.4638 4.21429,50.821 C3.95238,51.2019 3.94048,51.7138 4.17857,52.3567 C4.75,54.0233 6.46429,54.8567 9.32143,54.8567 L42.2857,54.8567 C42.9762,54.8567 43.6429,54.6721 44.2857,54.3031 C44.9286,53.934 45.3452,53.44 45.5357,52.821 L56.25,17.5709 C56.4167,17.0471 56.4762,16.3686 56.4286,15.5352 C57.3333,15.8924 58.0357,16.4043 58.5357,17.0709 C59.4881,18.4281 59.7024,19.9638 59.1786,21.6781 L49.3571,54.0352 C48.9048,55.559 47.994,56.8388 46.625,57.8745 C45.256,58.9102 43.7976,59.4281 42.25,59.4281 L9.28572,59.4281 C7.45238,59.4281 5.68452,58.7912 3.98214,57.5174 C2.27976,56.2436 1.09524,54.6781 0.428571,52.821 C-0.142857,51.2257 -0.166667,49.7138 0.357143,48.2852 C0.357143,48.19 0.392857,47.8686 0.464286,47.321 C0.535714,46.7733 0.583333,46.3329 0.607142,45.9995 C0.630952,45.809 0.595238,45.5531 0.5,45.2317 C0.404762,44.9102 0.369048,44.6781 0.392857,44.5352 C0.440476,44.2733 0.535714,44.0233 0.678572,43.7852 C0.821429,43.5471 1.01786,43.2674 1.26786,42.946 C1.51786,42.6245 1.71429,42.3448 1.85714,42.1067 C2.40476,41.2019 2.94048,40.1126 3.46429,38.8388 C3.9881,37.565 4.34524,36.4757 4.53572,35.571 C4.60714,35.3329 4.6131,34.9757 4.55357,34.4995 C4.49405,34.0233 4.4881,33.69 4.53572,33.4995 C4.60714,33.2376 4.80952,32.9043 5.14286,32.4995 C5.47619,32.0948 5.67857,31.821 5.75,31.6781 C6.25,30.821 6.75,29.7257 7.25,28.3924 C7.75,27.059 8.04762,25.9876 8.14286,25.1781 C8.16667,24.9638 8.1369,24.5829 8.05357,24.0352 C7.97024,23.4876 7.97619,23.1543 8.07143,23.0352 C8.16667,22.7257 8.42857,22.3626 8.85714,21.9459 C9.28571,21.5293 9.54762,21.2614 9.64286,21.1424 C10.0952,20.5233 10.6012,19.5174 11.1607,18.1245 C11.7202,16.7317 12.0476,15.5829 12.1429,14.6781 C12.1667,14.4876 12.131,14.184 12.0357,13.7674 C11.9405,13.3507 11.9167,13.0352 11.9643,12.8209 C12.0119,12.6305 12.119,12.4162 12.2857,12.1781 C12.4524,11.94 12.6667,11.6662 12.9286,11.3567 C13.1905,11.0471 13.3929,10.7971 13.5357,10.6067 C13.7262,10.321 13.9226,9.95786 14.125,9.51738 C14.3274,9.0769 14.506,8.66024 14.6607,8.26738 C14.8155,7.87452 15.006,7.44595 15.2321,6.98166 C15.4583,6.51738 15.6905,6.13643 15.9286,5.83881 C16.1667,5.54119 16.4821,5.26143 16.875,4.99952 C17.2679,4.73762 17.6964,4.60071 18.1607,4.58881 C18.625,4.5769 19.1905,4.64238 19.8571,4.78524 L19.8214,4.89238 C20.7262,4.6781 21.3333,4.57095 21.6429,4.57095 z"/>


                                    <TextBlock Text="{Binding Path=Name}" Style="{StaticResource PhoneTextTitle2Style}" Grid.Column="1"/>
                                    <TextBlock Text="{Binding Path=Description}" Style="{StaticResource PhoneTextNormalStyle}" TextWrapping="Wrap" 
                                               Grid.Column="1" Grid.Row="1"/>
                                </Grid>
                            </DataTemplate>
                        </phone:LongListSelector.ItemTemplate>
                    </phone:LongListSelector>
                </Grid>
            </phone:PivotItem>
        </phone:Pivot>
    </Grid>
    
</phone:PhoneApplicationPage>